## [2025-11-18 16:53:24]
Настроена загрузка интерактивных областей из файла interactiveAreas.json, переведены координаты в пиксели с учетом масштаба изображения yard_map.jpg, обновлена верстка под новые слои и добавлена автоматическая подгонка областей при ресайзе.

## [2025-11-19 10:36:31]
Исправлена обработка плейсхолдеров в коде. Добавлена функция isPlaceholder() для проверки плейсхолдеров (scriptData, areasPath, imagePath и др.). Теперь код не пытается парсить плейсхолдеры как данные и не пытается загружать файлы по плейсхолдерам. Добавлены информативные предупреждения в консоль и обработка ошибок CORS с подсказкой о необходимости веб-сервера для работы с локальными файлами.

## [2025-11-19 10:39:54]
Улучшен парсер данных для правильной обработки значений с пробелами и специальными символами (№, двоеточия в датах). Добавлены функции normalizePath() и convertToFileUrl() для обработки путей Windows с обратными слешами. Пути автоматически конвертируются в формат file:// URL при открытии через file:// протокол. Улучшена обработка ошибок с более информативными сообщениями. ВАЖНО: При использовании абсолютных путей Windows в JavaScript строках необходимо экранировать обратные слеши (использовать \\ вместо \) или использовать прямые слеши (/).

## [2025-11-19 10:49:31]
Удалена функция isPlaceholder() и константа PLACEHOLDERS, так как переменные externalData, mapImagePath и interactiveAreasPath всегда инициализированы реальными значениями. Упрощены проверки в функциях parseDataString(), loadMapImage() и loadInteractiveAreas() - теперь проверяется только наличие значения, без проверки на плейсхолдеры.

## [2025-01-XX XX:XX:XX]
Улучшена функция parseManualDataString в файлах test_.html и SRZ_map_for_gispetcherskaya.html для правильной обработки значений с кавычками внутри (например, `баржа "Степан"`). Добавлена логика отслеживания состояния кавычек при поиске конца значения: если значение начинается с кавычки, ищется закрывающая кавычка; если значение не начинается с кавычки, но содержит кавычки внутри, они игнорируются при поиске конца значения (запятая или закрывающая скобка). Это позволяет корректно обрабатывать названия судов с кавычками в значениях.

## [2025-11-25 00:00:00]
Добавлена логика: если данные по externalData отсутствуют или некорректны, карта отображается без интерактивных областей, а в верхней части выводится аккуратная надпись "Данные по судам и причалам за указанный период отсутствуют". 
Расширена информация во всплывающем окне (popup) для судна: теперь, если свойство "швартовка_вторым_бортом" или "швартовка_кормой" указано как true, выводится соответствующая строка с ответом "Да". Если значение "Нет" либо свойство отсутствует — строка не отображается.

## [2025-01-20]
Обновлена функция showPopup(): попап теперь показывается только если есть данные для отображения. Если parsedData отсутствует или отфильтрованные данные пусты, попап не отображается. Это улучшает пользовательский опыт, исключая показ пустых попапов.

## [2025-01-20]
Изменена логика отображения попапа: теперь попап всплывает при наведении на иконку судна, а не на интерактивную область. Каждая иконка судна имеет свои обработчики событий (mouseenter, mousemove, mouseleave), и при наведении показывается информация только по конкретному судну, соответствующему этой иконке. Если в области расположено несколько иконок, при наведении на каждую показывается информация по соответствующему судну. Убраны обработчики событий с интерактивных областей. Добавлены стили для иконок: cursor: pointer и pointer-events: auto, чтобы иконки были интерактивными.

## [2025-01-20]
Добавлены label с названиями судов над каждой иконкой в стиле флэт-дизайн (серые тона). Каждая иконка теперь обернута в ship-icon-wrapper, который содержит label и иконку. Label имеет серый фон (#616161), белый текст, скругленные углы и тень. Обновлен стиль попапа на флэт-дизайн в серых тонах: убраны цветные границы и тени, использованы серые оттенки (#f5f5f5, #e0e0e0, #424242, #616161), плоский дизайн без скруглений для попапа, минималистичный вид с четким разделением секций.

## [2025-01-20]
Добавлена проверка наличия данных при загрузке страницы. Если переменная externalData отсутствует, является пустым массивом или плейсхолдером "scriptData", вверху карты отображается label с сообщением "Данные по причалам и судам за указанный период отсутствуют". Label выполнен в стиле флэт-дизайн (серые тона) и позиционируется по центру вверху страницы. Добавлены стили .no-data-label с фиксированным позиционированием и z-index для отображения поверх карты.

## [2025-01-20]
Добавлена поддержка полей "швартовка_вторым_бортом" и "швартовка_кормой" в попапе. Поля могут иметь значения "Да" или "Нет" и отображаются в попапе, если они присутствуют в данных судна. Поля добавлены после информации о дате выбытия.

## [2025-01-20]
Добавлена поддержка поля "судно_телефон" в попапе. Поле содержит номер телефона в виде строки и отображается в попапе с заголовком "Телефон:", если оно присутствует в данных судна. Поле добавлено после информации о швартовке кормой.

## [2025-01-20]
Добавлена визуальная индикация для судов с швартовкой вторым бортом или кормой. Если поле "швартовка_вторым_бортом" или "швартовка_кормой" имеет значение "Да", иконка судна становится светлее (увеличен brightness в фильтре) и смещается выше и правее относительно первой иконки. Добавлены классы .ship-icon.lighter для светлой иконки и .ship-icon-wrapper.offset для смещения позиции.

