# Диспетчерская - Интерактивный план завода

## Описание

Веб-приложение для отображения карты завода с интерактивными областями. Позволяет навести курсор на объект и увидеть дополнительную информацию во всплывающем окне.

## Основные файлы проекта

- `SRZ_map_for_gispetcherskaya.html` - основной файл интерфейса (HTML, CSS, JS).
- `interactiveAreas.json` - файл с описанием интерактивных областей для карты.
- `yard_map.jpg` - изображение плана завода.
- `dev-journal.md` - журнал разработки и событий проекта.

## Требования к `interactiveAreas.json`

Файл с интерактивными областями должен быть валидным JSON-массивом. Каждый элемент массива описывает отдельную область карты и должен содержать следующие поля:

- `name` *(string)* — произвольное название области для отображения во всплывающем окне.
- `x`, `y`, `width`, `height` *(number)* — координаты и размеры области на изображении карты в пикселях.
- `matchField` *(string)* — название поля в массиве данных, по которому будет выполняться поиск (например, `"причал"`, `"пирс"` или `"док"`).
- `matchValue` *(string)* — значение, которое должно существовать в указанном поле. Если не задано, в интерфейсе используется `name`, но для корректного сопоставления рекомендуется указывать явное значение.

Пример корректной записи:

```json
[
  {
    "name": "причал №26",
    "x": 288.7,
    "y": 194.9,
    "width": 48,
    "height": 12,
    "matchField": "причал",
    "matchValue": "причал №26"
  }
]
```

Обратите внимание, что значения в `matchField` и `matchValue` чувствительны к регистру и пробелам — они должны точно совпадать с ключами и значениями во входных данных.

## Проверка интерактивных областей

Для автоматической проверки того, что каждое `matchValue` присутствует в загружаемых данных, используйте утилиту `scripts/validateAreas.js`:

```
node scripts/validateAreas.js --data path/to/data.json --areas interactiveAreas.json
```

- `--data` (`-d`) — путь к JSON-файлу с массивом объектов, которые выводятся во всплывающем окне.
- `--areas` (`-a`) — путь к файлу интерактивных областей (по умолчанию `interactiveAreas.json`).

Скрипт выводит предупреждения для всех областей, у которых не найдено соответствующих записей в данных, что удобно для проверки в CI/CD.

## Быстрый старт

1. Склонируйте репозиторий или скачайте проект.
2. Поместите актуальную схему завода в `yard_map.jpg`.
3. Определите в `interactiveAreas.json` области (координаты и привязку к объектам).
4. Запустите локальный веб-сервер (рекомендуется для корректной работы с локальными файлами):

        python -m http.server

    или используйте расширение Live Server в VS Code.

5. Откройте `http://localhost:8000/SRZ_map_for_gispetcherskaya.html` в браузере.

## Примечания

- Все пути к файлам лучше указывать относительными (например, `interactiveAreas.json` и `yard_map.jpg`) — так они корректно сработают в любой ОС и при открытии через локальный сервер.
- Для абсолютных путей Windows используйте формат `C:/path/to/file` или `file:///C:/path/to/file` (последний нужен при открытии файла напрямую, без сервера).
- Для корректной работы интерактивных областей и данных используйте UTF-8.
- Журнал событий и изменений ведётся в `dev-journal.md`.
